<dom-module id="docs-example">
    <style>
        :host {
            padding: 0px;
            display: block;
        }

        :host > section {
            margin: 25px 0;

            display: flex;
            flex-direction: row;
        }

        :host > section > .code {
            margin-left: 40px;
            flex: 1;

            display: flex;
            flex-direction: column;
        }

        :host > summary,
        :host > summary p {
            font-size: 15px;
            font-weight: 300;
            color: rgb(47, 47, 47);
            line-height: 20px;
        }

        .widgets {
            min-width: 250px;
        }
    </style>

    <template>
        <header>
            <h2>{{ title }}</h2>
        </header>

        <summary>
            <content></content>
        </summary>

        <section>
            <div class="widgets"></div>

            <div class="code">
                <pre class="markup" src="[[ href ]]"></pre>
                <pre class="script" src="[[ script ]]"></pre>
            </div>

            <script is="dom-if" if="{{ !!script }}" src="[[ script ]]"></script>
        </section>
    </template>

    <script>
        Polymer({
            is: 'docs-example',

            properties: {
                href: String
            },

            attached: function() {
                var widgets = this.$$('.widgets');

                var xhr = new XMLHttpRequest();
                xhr.responseType = "text/html";
                xhr.open('GET', this.href);
                xhr.onload = function() {
                    widgets.innerHTML = this.response;
                };
                xhr.send();
            },

            ready: function() {
                var code, content;
                this.$$('section pre.markup').setAttribute('data-src', this.href);

                if(this.script) {
                    this.$$('section pre.script').setAttribute('data-src', this.script);
                }
            }
        });
    </script>
</dom-module>